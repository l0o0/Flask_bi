{% extends "dashboardbase.html" %}

{%- block css -%}
{{ super() }}
<script>
$(function(){
$(".btn[data-target='#myModal']").click(function() {
       var columnHeadings = $("thead th").map(function() {
                 return $(this).text().toLowerCase();
              }).get();
       columnHeadings.pop();
       var columnValues = $(this).parent().siblings().map(function() {
                 return $(this).text();
       }).get();
  var modalBody = $('<div id="modalContent"></div>');
  var modalForm = $('<form role="form" name="modalForm" action="{{ url_for('main.formlist_update') }}" method="post"></form>');
  $.each(columnHeadings, function(i, columnHeader) {
       var formGroup = $('<div class="form-group"></div>');
       formGroup.append('<label for="'+columnHeader+'">'+columnHeader+'</label>');
       formGroup.append('<input class="form-control" name="'+columnHeader+'" id="'+columnHeader+'" value="'+columnValues[i]+'" />'); 
       modalForm.append(formGroup);
  });
  modalBody.append(modalForm);
  $('.modal-body').html(modalBody);
});
$('.modal-footer .btn-primary').click(function() {
   $('form[name="modalForm"]').submit();
});
}
)
</script>
{% endblock %}


{% block content_right %}
<!-- page heading start-->
<div class="page-heading">
    <h3>
        Editable Table
    </h3>
    <ul class="breadcrumb">
        <li>
            <a href="{{ url_for('main.index') }}">Dashboard</a>
        </li>
        <li>
            <a href="#">Data Table</a>
        </li>
        <li class="active"> Editable Table </li>
    </ul>
</div>
<!-- page heading end-->
<div class="wrapper">
    <div class="row">
        <div class="col-sm-12">
            <section class="panel">
                <header class="panel-heading clearfix">
                    Editable Table
                    <span class="tools pull-right">
                        <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">Tools <i class="fa fa-angle-down"></i>
                        </button>
                        <ul class="dropdown-menu pull-right">
                            <li><a href="#">Export to Excel</a></li>
                        </ul>               
                     </span>
                </header>
                <div class="panel-body">
                <div class="adv-table editable-table ">
                <div class="space15"></div>
                <table class="table table-striped table-hover table-bordered" id="editable-sample">
                <thead>
                <tr>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Create</th>
                    <th>Modify</th>
                    <th>Public</th>
                    <th>Edit</th>                   
                </tr>
                </thead>
                <tbody>
                {% for item in  query %}
                <tr class="">
                    <td >{{ item.get('title') }}</td>
                    <td>{{ item.get('description') }}</td>
                    <td>{{ item.get('createTime') }}</td>
                    <td>{{ item.get('modifyTime') }}</td>
                    <td>{{ item.get('public') }}</td>
                    <td><button class="btn btn-success" data-toggle="modal" data-target="#myModal">Edit</button></td>
                </tr>
                {% endfor %}
                </tbody>
                </table>
                </div>
                </div>
            </section>
        </div>
    </div>
</div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content"></div>
    </div>
    <div class="modal-dialog">
        <div class="modal-content"></div>
    </div>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"> <span aria-hidden="true" class="">×   </span><span class="sr-only">Close</span>

                </button>
                 <h4 class="modal-title" id="myModalLabel">调查问卷表格修改</h4>

            </div>
            <div class="modal-body"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id='update'>Save changes</button>
                <button type="button" class="btn btn-success" id='saveas'>SaveAs</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block js%}
{% endblock %}